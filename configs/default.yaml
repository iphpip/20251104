# 功能：集中管理所有实验参数，确保实验可复现性
# SCI要求：完整记录所有超参数，便于审稿人复现实验
# 实验配置
experiment:
  name: "contrastive_ts_anomaly_detection"
  seed: 42
  device: "cuda"
  data_root: "dataset"  # 数据集根目录

# 数据集配置
datasets:
  NAB:
    path: "nab"
    type: "univariate"
    train_anomaly_ratio: 0.085
    test_anomaly_ratio: 0.1036
  SWaT:
    path: "swat"  # 需要下载
    type: "multivariate" 
    dimensions: 51
    train_anomaly_ratio: 0.0
    test_anomaly_ratio: 0.1214
  SKAB:
    path: "skab"
    type: "multivariate"
    dimensions: 8
  MIT-BIH:
    path: "mitdb"
    type: "multivariate"
    dimensions: 2
    train_anomaly_ratio: 0.0451
    test_anomaly_ratio: 0.0575

# 数据预处理配置
data:
  window_size: 100
  stride: 1
  train_ratio: 0.7
  val_ratio: 0.1
  test_ratio: 0.2
  normalization: "zscore"

# 数据增强配置
augmentation:
  weak:
    time_jitter_sigma: 0.05
    amplitude_scaling_sigma: 0.1
    gaussian_noise_sigma: 0.1
    crop_min_ratio: 0.9
    crop_max_ratio: 1.0
  strong:
    time_warping_sigma: 0.2
    frequency_masking_ratio: 0.2
    n_windows_shuffle: 8

# 编码器配置
encoders:
  TCN:
    input_dim: 1
    hidden_dims: [64, 128, 256]
    output_dim: 128
    kernel_size: 3
    dropout: 0.1
  LSTM:
    input_dim: 1
    hidden_dim: 256
    num_layers: 2
    output_dim: 128
    dropout: 0.2
    bidirectional: false
  Transformer:
    input_dim: 1
    d_model: 128
    nhead: 8
    num_layers: 2
    dim_feedforward: 512
    output_dim: 128
    dropout: 0.1

# 投影头配置
projection_head:
  hidden_dims: [256, 256]
  output_dim: 64

# 检测器配置
detectors:
  Linear:
    input_dim: 128
  MLP:
    input_dim: 128
    hidden_dims: [128, 128]
    dropout: 0.2
  Temporal:
    input_dim: 128
    hidden_dim: 64
    kernel_size: 3

# 损失函数配置
loss:
  temperature: 0.07
  temporal_margin: 0.5
  time_gap: 10
  weights: [1.0, 0.5, 0.5]

# 训练配置
training:
  pretrain:
    batch_size: 256
    learning_rate: 0.003
    weight_decay: 0.0001
    epochs: 200
    save_interval: 10
  detector:
    batch_size: 64
    learning_rate: 0.001
    epochs: 100
    patience: 10

# 评估配置
evaluation:
  metrics: ["accuracy", "precision", "recall", "f1", "auc_roc", "auc_pr"]
  n_runs: 5
  confidence_level: 0.95
  
# 超参数调优配置
tuning:
  dataset: "NAB"  # 用于调优的数据集
  encoder_type: "TCN"  # 用于调优的编码器类型
  n_trials: 100
  validation_metric: "f1"
  
# 基线实验配置  
baselines:
  datasets: ["NAB", "SWaT", "SKAB", "MIT-BIH"]
  methods: ["3Sigma", "IsolationForest", "OneClassSVM", "AutoEncoder"]
  n_runs: 5  # 每个方法的运行次数